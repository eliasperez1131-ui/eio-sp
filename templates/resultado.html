<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Resultado EIO-SP</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body {
    font-family: Arial, sans-serif;
    background-color: #f2f4f8;
    margin: 0;
}

.header {
    background-color: #0b3d91;
    color: white;
    padding: 20px;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
}

.container {
    width: 90%;
    max-width: 1000px;
    margin: 30px auto;
}

.card {
    background: white;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.dictamen-box {
    padding: 20px;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
    border-radius: 8px;
    color: white;
}

.apto {
    background-color: #2e7d32;
}

.noapto {
    background-color: #c62828;
}

.section-title {
    font-weight: bold;
    margin-bottom: 10px;
}

</style>
</head>

<body>

<div class="header">
Resultado Evaluación EIO-SP
</div>

<div class="container">

<div class="card">
<strong>Índice Global de Integridad Operativa (IGIO):</strong> {{ igio }}%
</div>

{% if dictamen == "APTO" %}
<div class="dictamen-box apto">
DICTAMEN FINAL: APTO
</div>
{% else %}
<div class="dictamen-box noapto">
DICTAMEN FINAL: NO APTO
</div>
{% endif %}

<div class="card">
<canvas id="radarChart"></canvas>
</div>

<div class="card">
<div class="section-title">Fortalezas:</div>
<ul>
{% for dimension, porcentaje in dimensiones.items() %}
    {% if porcentaje >= 75 %}
        <li>{{ dimension }} ({{ porcentaje }}%)</li>
    {% endif %}
{% endfor %}
</ul>
</div>

<div class="card">
<div class="section-title">Áreas por trabajar:</div>
<ul>
{% for dimension, porcentaje in dimensiones.items() %}
    {% if porcentaje >= 50 and porcentaje < 75 %}
        <li>{{ dimension }} ({{ porcentaje }}%)</li>
    {% endif %}
{% endfor %}
</ul>
</div>

<div class="card">
<div class="section-title">Debilidades Críticas:</div>
<ul>
{% for dimension, porcentaje in dimensiones.items() %}
    {% if porcentaje < 50 %}
        <li>{{ dimension }} ({{ porcentaje }}%)</li>
    {% endif %}
{% endfor %}
</ul>
</div>

</div>

<script>

const ctx = document.getElementById('radarChart').getContext('2d');

const radarChart = new Chart(ctx, {
    type: 'radar',
    data: {
        labels: {{ dimensiones.keys() | list | tojson }},
        datasets: [{
            label: 'Perfil Operativo',
            data: {{ dimensiones.values() | list | tojson }},
            backgroundColor: 'rgba(11, 61, 145, 0.2)',
            borderColor: 'rgba(11, 61, 145, 1)',
            borderWidth: 2,
            pointBackgroundColor: 'rgba(245, 124, 0, 1)'
        }]
    },
    options: {
        scales: {
            r: {
                suggestedMin: 0,
                suggestedMax: 100
            }
        }
    }
});

</script>

</body>
</html>
